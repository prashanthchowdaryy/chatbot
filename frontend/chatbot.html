<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OpenRouter Chat Test</title>
  <style>
    body { font-family: Arial; background: #f2f2f2; padding: 20px; }
    #chat { max-width: 500px; margin: auto; background: white; padding: 15px; border-radius: 10px; }
    .msg { margin: 8px 0; padding: 10px; border-radius: 6px; }
    .user { background: #0078ff; color: white; text-align: right; }
    .bot { background: #eee; color: black; text-align: left; }
  </style>
</head>
<body>
  <div id="chat">
    <div id="messages"></div>
    <input id="input" type="text" placeholder="Say something..." style="width: 75%;">
    <button id="send">Send</button>
  </div>

  <script>
    const API_KEY = "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";

    document.getElementById("send").addEventListener("click", async () => {
      const input = document.getElementById("input");
      const userMsg = input.value.trim();
      if (!userMsg) return;

      addMessage(userMsg, "user");
      input.value = "";

      const reply = await getBotReply(userMsg);
      addMessage(reply, "bot");
    });

    function addMessage(text, sender) {
      const div = document.createElement("div");
      div.className = `msg ${sender}`;
      div.textContent = text;
      document.getElementById("messages").appendChild(div);
    }

    async function getBotReply(prompt) {
      try {
        const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${API_KEY}`,
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            model: "mistralai/mistral-7b-instruct", 
            messages: [{ role: "user", content: prompt }],
          }),
        });

        const data = await res.json();
        console.log(data);
        return data.choices?.[0]?.message?.content || "No response received.";
      } catch (err) {
        console.error(err);
        return "Error connecting to API.";
      }
    }
  </script>
</body>
</html>
